<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>

   <!-- UI for initializing and setting Sierra prefrences -->

   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            class="com.surelogic.sierra.client.eclipse.preferences.SierraPreferencePage"
            id="com.surelogic.sierra.client.eclipse.preferences.SierraPreferencePage"
            name="Sierra"/>
   </extension>
   
   <extension
         point="org.eclipse.core.runtime.preferences">
      <initializer class="com.surelogic.sierra.client.eclipse.preferences.PreferenceInitializer"/>
   </extension>
   
  <!-- Sierra menus -->

   <extension point="org.eclipse.ui.actionSets">
        <actionSet label="Sierra ActionSet" visible="true" id="com.surelogic.sierra.client.eclipse.workbenchActionSet">
          <menu
                id="com.surelogic.sierra.client.eclipse.workbenchMenu"
                label="Sierra"
                path="additions">
            <groupMarker name="content"/>
            <separator name="additions"/>
          </menu>
          
          <action
               class="com.surelogic.sierra.client.eclipse.actions.LoadRunDocument"
               id="com.surelogic.sierra.client.eclipse.actions.LoadRunDocument"
               label="Load Analysis Run Document..."
               menubarPath="com.surelogic.sierra.client.eclipse.workbenchMenu/content">
          </action>     
                      
          <action
           		class="com.surelogic.sierra.client.eclipse.actions.RunAnalysisAction"
                id="com.surelogic.sierra.client.eclipse.actions.RunAnalysisWorkbench"
                label="Analyze Project"
                menubarPath="com.surelogic.sierra.client.eclipse.workbenchMenu/content"
                enablesFor="+">
             <selection class="org.eclipse.jdt.core.IJavaProject"/>
          </action>
          
        </actionSet>
   </extension>
      
   <extension
         point="org.eclipse.ui.popupMenus">
      <objectContribution
            id="Sierra.popupMenu"
            objectClass="org.eclipse.jdt.core.IJavaProject">
         <action
               class="com.surelogic.sierra.client.eclipse.actions.RunAnalysisAction"
               enablesFor="+"
               id="com.surelogic.sierra.client.eclipse.actions.RunAnalysisPopup"
               icon="platform:/plugin/com.surelogic.common.eclipse/lib/images/sierra_logo.gif"
               label="Analyze Project"
               menubarPath="additions"/>
      </objectContribution>
   </extension>
   
   <!-- Sierra views -->
   
   <extension
         point="org.eclipse.ui.views">
         
      <category
            name="Sierra"
            id="com.surelogic.sierra.client.eclipse">
      </category>

      <view
            allowMultiple="false"
            category="com.surelogic.sierra.client.eclipse"
            class="com.surelogic.adhoc.views.AdHocQueryView"
            id="com.surelogic.sierra.client.eclipse.AdHocQueryView"
            icon="platform:/plugin/com.surelogic.common.eclipse/lib/images/query.gif"
            name="Query Sierra">
      </view>
   
      <view
            allowMultiple="true"
            category="com.surelogic.sierra.client.eclipse"
            class="com.surelogic.adhoc.views.AdHocQueryResultsView"
            id="com.surelogic.sierra.client.eclipse.AdHocQueryView.Results"
            name="Query Results">
      </view>

          <view
            category="com.surelogic.sierra.client.eclipse"
            class="com.surelogic.sierra.client.eclipse.views.FindingsView"
            id="com.surelogic.sierra.client.eclipse.views.FindingsView"
            icon="platform:/plugin/com.surelogic.common.eclipse/lib/images/sierra_logo.gif"
            name="Findings"/>
   </extension>

   <!-- Sierra Explorer perspective and links to the Java perspective -->
   
   <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            name="Sierra Explorer"
            icon="platform:/plugin/com.surelogic.common.eclipse/lib/images/sierra_logo.gif"
            class="com.surelogic.sierra.client.eclipse.perspectives.SierraExplorerPerspective"
            id="com.surelogic.sierra.client.eclipse.perspectives.SierraExplorerPerspective">
      </perspective>
   </extension>
   
   <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension
            targetID="com.surelogic.sierra.client.eclipse.perspectives.SierraExplorerPerspective">
         <perspectiveShortcut
               id="org.eclipse.jdt.ui.JavaPerspective">
         </perspectiveShortcut>
      </perspectiveExtension>
   </extension>
   
   <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension
            targetID="org.eclipse.jdt.ui.JavaPerspective">
         <viewShortcut
               id="com.surelogic.sierra.client.eclipse.views.FindingsView">
         </viewShortcut>
         <perspectiveShortcut
               id="com.surelogic.sierra.client.eclipse.perspectives.SierraExplorerPerspective">
         </perspectiveShortcut>
      </perspectiveExtension>
   </extension>
   
   <!-- Enable the ad hoc query view on Sierra -->

   <extension
         point="com.surelogic.adhoc.query">
      <instance
            adHocQueryViewId="com.surelogic.sierra.client.eclipse.AdHocQueryView"
            class="com.surelogic.sierra.client.eclipse.AdHocGlue">
      </instance>
   </extension>
   
</plugin>
